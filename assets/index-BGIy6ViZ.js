(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))c(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const m of r.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&c(m)}).observe(document,{childList:!0,subtree:!0});function o(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function c(n){if(n.ep)return;n.ep=!0;const r=o(n);fetch(n.href,r)}})();const N=document.querySelector("[data-theme-switch-button]"),v=N.querySelector("[data-theme-switch-cursor]");N.addEventListener("click",()=>{document.body.classList.contains("dark")?(v.style.setProperty("--translateX","0"),document.body.classList.remove("dark"),document.body.classList.add("light")):(v.style.setProperty("--translateX","100"),document.body.classList.add("dark"),document.body.classList.remove("light"))});const i=(e,t=document)=>t.querySelector(`[data-${e}]`);function J(e){e.append(Q())}function O(e){const t=document.createElement("span");t.innerHTML=" mm",e.append(t)}function V(e){const t=document.createElement("span");t.innerHTML=" km/h",e.append(t)}function x(e){const t=document.createElement("span");t.innerHTML="%",e.append(t)}function Q(){const e=document.createElement("span");return e.innerHTML="&deg;C",e}function q(e){const t=new Date(e);return{date:Y(t),time:te(t)}}function a(e,t,o=!1){e.textContent=t.toString(),o&&J(e)}function Y(e){return new Intl.DateTimeFormat("en-US",{month:"long",weekday:"long",day:"2-digit",year:"2-digit"}).format(e)}function ee(e){const t=new Date(e);return new Intl.DateTimeFormat("en-US",{weekday:"long"}).format(t)}function te(e){return new Intl.DateTimeFormat("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}).format(e)}function ne(e){return new Date(e).getHours()===new Date().getHours()}function re(e){const t=new Date(e);return new Intl.DateTimeFormat("en-US",{day:"2-digit",month:"long"}).format(t)}function U(){document.body.classList.remove("blurred")}function z(e){return e<=2?"Low":e<=5?"Moderate":e<=7?"High":e<=10?"Very High":"Extreme"}const A=new URL("https://api.open-meteo.com/v1/forecast?latitude&longitude&current=temperature_2m,relative_humidity_2m,apparent_temperature,is_day,precipitation,weather_code,wind_speed_10m&hourly=temperature_2m,relative_humidity_2m,apparent_temperature,precipitation_probability,weather_code,wind_speed_10m,uv_index,is_day&daily=weather_code,temperature_2m_max,temperature_2m_min,apparent_temperature_max,apparent_temperature_min,uv_index_max,precipitation_sum&timezone"),P=A.searchParams;async function ie(e,t,o){try{P.set("latitude",e.toString()),P.set("longitude",t.toString()),P.set("timezone",o.toString());const c=await fetch(A);if(c.ok)return await c.json();throw await c.json()}catch(c){throw c}}function oe(){return new Promise((e,t)=>{navigator.geolocation.getCurrentPosition(o=>{const{latitude:c,longitude:n}=o.coords,r=Intl.DateTimeFormat().resolvedOptions().timeZone;U(),ie(c,n,r).then(m=>{e(m)}).catch(m=>{t(m)})},o=>{U(),console.error(o.message),alert("Sorry couldn't access your location!")},{enableHighAccuracy:!0})})}const W=new Map;d([0,1],"sun");d([2],"partly-cloudy");d([3],"cloud");d([45,48],"overcast");d([51,61,80],"rainy-light");d([53,63,81],"rainy-moderate");d([55,65,82],"rainy-heavy");d([56,57,66,67],"rainy-snow");d([71,85],"snow-light");d([73],"snow-moderate");d([75,77,86],"snow-heavy");d([95],"thunderstorm");d([96,99],"hail");function d(e,t){e.forEach(o=>{W.set(o,t)})}function B(e){const t=W.get(e);return t?`./icons/${t}.svg`:"./icons/cloud.svg"}function j(e){const t=W.get(e);return t||"weather"}oe().then(e=>{ae(e),ce(e),se(e),le()}).catch(e=>{console.error(e),console.error(e.reason),alert("Counldn't fetch weather")});function ae(e){const{time:t,temp:o,weatherCode:c,humidity:n,isDay:r,windSpeed:m,precipitation:u,tempHigh:l,tempLow:p,feelsLikeHigh:h,feelsLikeLow:g,uvIndex:y}=me(e),S=i("current-temp"),D=i("current-icon"),T=i("current-date"),E=i("current-time"),k=i("current-temp-high"),s=i("current-temp-low"),f=i("current-fl-high"),b=i("current-fl-low"),C=i("current-precipitation"),H=i("current-uv-index"),_=i("current-humidity"),F=i("current-day-night"),w=i("current-wind-speed");a(S,o,!0),D.src=B(c),D.alt=j(c);const L=q(t);a(T,L.date),a(E,L.time),a(k,l,!0),a(s,p,!0),a(f,h,!0),a(b,g,!0),a(C,u),O(C),a(H,z(y)),a(_,n),x(_),a(F,r?"Day":"Night"),a(w,m),V(w)}function ce(e){const t=de(e),o=i("hourly-segment-cards-container"),c=i("hourly-temp-card-template"),n=document.createDocumentFragment();for(let r=0;r<24;r++)I(c,n,t,"hourly",r);o.innerHTML="",o.append(n)}function se(e){const t=ue(e),o=i("daily-segment-cards-container"),c=i("daily-temp-card-template"),n=document.createDocumentFragment();for(let r=0;r<7;r++)I(c,n,t,"daily",r);o.innerHTML="",o.append(n)}function me(e){const{current:{time:t,temperature_2m:o,weather_code:c,relative_humidity_2m:n,is_day:r,wind_speed_10m:m,precipitation:u},daily:{temperature_2m_max:[l],temperature_2m_min:[p],apparent_temperature_max:[h],apparent_temperature_min:[g],uv_index_max:[y]}}=e;return{time:t,temp:o,weatherCode:c,humidity:n,isDay:r,windSpeed:m,precipitation:u,tempHigh:l,tempLow:p,feelsLikeHigh:h,feelsLikeLow:g,uvIndex:y}}function de(e){const{hourly:{time:t,temperature_2m:o,relative_humidity_2m:c,apparent_temperature:n,precipitation_probability:r,weather_code:m,wind_speed_10m:u,uv_index:l,is_day:p}}=e;return{time:t,temp:o,humidity:c,feelsLike:n,precipitation:r,weatherCode:m,windSpeed:u,uvIndex:l,isDay:p}}function ue(e){const{daily:{time:t,weather_code:o,temperature_2m_max:c,temperature_2m_min:n,apparent_temperature_max:r,apparent_temperature_min:m,uv_index_max:u,precipitation_sum:l}}=e;return{time:t,weatherCode:o,tempHigh:c,tempLow:n,feelsLikeHigh:r,feelsLikeLow:m,uvIndex:u,precipitation:l}}function I(e,t,o,c,n){const{time:r,temp:m,weatherCode:u,feelsLike:l,tempHigh:p,tempLow:h,feelsLikeHigh:g,feelsLikeLow:y,humidity:S,uvIndex:D,precipitation:T,windSpeed:E,isDay:k}=o,s=e.content.cloneNode(!0),f=i("segment-card-title",s),b=i("segment-card-temp",s),C=i("segment-card-date",s),H=i("segment-card-icon",s),_=i("segment-card-humidity",s),F=i("segment-card-feels-like",s),w=i("segment-card-precipitation",s),L=i("segment-card-wind-speed",s),X=i("segment-card-uv-index",s),$=i("segment-card-day-night",s),K=i("segment-card-temp-high",s),R=i("segment-card-temp-low",s),Z=i("segment-card-feel-like-high",s),G=i("segment-card-feel-like-low",s);c==="hourly"?(ne(r[n])&&M(s),a(f,q(r[n]).time),a(b,m[n],!0),a(_,S[n]),x(_),a(F,l[n],!0),a(L,E[n]),V(L),a($,k[n]?"Day":"Night")):(n===0?(a(f,"Today"),M(s)):a(f,ee(r[n])),a(C,re(r[n])),a(K,p[n],!0),a(R,h[n],!0),a(Z,g[n],!0),a(G,y[n],!0)),H.src=B(u[n]),H.alt=j(u[n]),a(w,T[n]),O(w),a(X,z(D[n])),t.append(s)}function M(e){i("segment-card",e).classList.add("present")}function le(){i("hourly-segment-cards-container").querySelector(".present").scrollIntoView({inline:"start",behavior:"smooth"})}
